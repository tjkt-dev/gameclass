<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Math Speed - Penjumlahan</title>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  background:#0f172a;
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.navbar{
  width:100%;
  background:#1e293b;
  padding:15px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.navbar a{
  color:white;
  text-decoration:none;
  margin-left:20px;
  font-weight:bold;
}
h2{margin:10px 0}
.game{
  margin-top:20px;
  background:#020617;
  padding:20px;
  border-radius:12px;
  width:90%;
  max-width:400px;
  text-align:center;
}
.question{
  font-size:28px;
  margin-bottom:15px;
}
input{
  width:100%;
  padding:12px;
  font-size:18px;
  border-radius:8px;
  border:none;
  text-align:center;
}
.info{
  margin-top:10px;
  font-size:1.1em;
}
.btn{
  margin-top:15px;
  padding:10px 25px;
  background:#38bdf8;
  border:none;
  border-radius:6px;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="navbar">
  <h3>ðŸ§® Math Speed</h3>
  <nav>
    <a href="index.html">Beranda</a>
    <a href="game.html">Game</a>
  </nav>
</div>

<h2>Perjumlahan Cepat</h2>
<p>Jawab secepat mungkin (60 detik)</p>

<div class="game">
  <div class="question" id="question">-</div>
  <input type="number" id="answer" placeholder="Jawaban..." disabled>
  <div class="info">
    Skor: <span id="score">0</span> |
    Waktu: <span id="time">60</span>s
  </div>
  <button class="btn" onclick="startGame()">Mulai</button>
</div>

<script>
let a,b,correct;
let score=0;
let time=60;
let timer;
let playing=false;

/* ===== AUDIO ===== */
let audioCtx;
function sound(freq,dur=0.1){
  if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  o.frequency.value=freq;
  o.type="square";
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+dur);
  o.stop(audioCtx.currentTime+dur);
}

/* ===== GAME ===== */
function getMaxNumber(){
  if(score<5) return 10;
  if(score<10) return 100;
  if(score<20) return 1000;
  if(score<30) return 10000;
  if(score<40) return 100000;
  return 1000000;
}

function newQuestion(){
  const max=getMaxNumber();
  a=Math.floor(Math.random()*max)+1;
  b=Math.floor(Math.random()*max)+1;
  correct=a+b;
  document.getElementById("question").innerText=`${a} + ${b} = ?`;
}

function startGame(){
  score=0;
  time=60;
  playing=true;
  document.getElementById("score").innerText=score;
  document.getElementById("time").innerText=time;
  document.getElementById("answer").disabled=false;
  document.getElementById("answer").value="";
  document.getElementById("answer").focus();

  newQuestion();
  clearInterval(timer);
  timer=setInterval(()=>{
    time--;
    document.getElementById("time").innerText=time;
    if(time<=0){
      endGame();
    }
  },1000);
}

document.getElementById("answer").addEventListener("input",e=>{
  if(!playing) return;
  if(Number(e.target.value)===correct){
    score++;
    sound(800);
    document.getElementById("score").innerText=score;
    e.target.value="";
    newQuestion();
  }
});

function endGame(){
  clearInterval(timer);
  playing=false;
  document.getElementById("answer").disabled=true;
  sound(200,0.4);
  alert("Waktu habis!\nSkor kamu: "+score);
}
</script>

</body>
</html>